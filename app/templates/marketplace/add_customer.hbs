<h1 class="page-title">Add a customer</h1>

<form id="add-customer" class="full-page-form">
    <fieldset class="application-type">
        <legend>Who is this customer?</legend>
        <div class="control-group">
            <a href="#" {{ action selectType "PERSON" }} class="person"><span class="icon"></span>Person</a>
            <div class="or"><hr><span>OR</span><hr></div>
            <a href="#" {{ action selectType "BUSINESS" }} class="business"><span class="icon"></span>Business</a>
        </div>
    </fieldset>

    {{#if selectedType}}

    	<fieldset>
    	<div class="section-banner-header">
            <p><strong>Basic info</strong> (all fields are optional)</p>
        </div>
        {{#if isBusiness}}
            {{view Balanced.ControlGroupFieldView placeholder="Business name" field="business_name" help="Enter the full business name"}}
            {{view Balanced.ControlGroupFieldView placeholder="EIN" field="ein" help="Enter the 9-digit employer identification number"}}
            {{view Balanced.ControlGroupFieldView placeholder="Name" field="name" help="Enter the business representative's name"}}
            {{view Balanced.ControlGroupFieldView placeholder="Email" field="email" help="Enter the email" }}
	    {{else}}
	    	{{view Balanced.ControlGroupFieldView placeholder="Name" field="name" help="Enter the customer's name"
	    	}}
	    	{{view Balanced.ControlGroupFieldView placeholder="Email" field="email" help="Enter the customer's email" }}
	    {{/if}}

	    <div class="section-banner-header">
		    <div {{bindAttr class=":disclosure-button optionalFieldsOpen:open"}}><a href="#" {{action toggleOptionalFields}}>Additional Info (all fields are optional)</a></div>
            <p><strong>Additional info</strong> (all fields are optional)</p>
        </div>

    	{{#if optionalFieldsOpen}}
	    	{{view Balanced.ControlGroupFieldView placeholder="Street address" field="address.street_address" help="Enter the street address" }}
	    	{{view Balanced.ControlGroupFieldView placeholder="City" field="address.city" help="Enter the city" }}
	    	{{view Balanced.ControlGroupFieldView placeholder="Country" field="address.country" help="Enter the country" }}
	    	{{view Balanced.ControlGroupFieldView placeholder="State/Province" field="address.region" help="Enter the state or province" }}
	        {{view Balanced.ControlGroupFieldView placeholder="Postal code" field="address.postal_code" help="Enter the postal code" }}
	        {{view Balanced.ControlGroupFieldView placeholder="Phone number" field="phone" help="Enter the phone number" }}
	        <div {{bindAttr class=":control-group model.validationErrors.dob:error"}}>
		        {{view Ember.TextField valueBinding="dob_month" name="dob_month" class="span2" placeholder="MM"}}
	            {{view Ember.TextField valueBinding="dob_year" name="dob_year" class="span2" placeholder="YYYY"}}
	            <label>Enter the date of birth</label>
	        </div>
	        {{view Balanced.ControlGroupFieldView placeholder="Last 4 of SSN" field="ssn_last4" help="Enter the last 4 digits of the social security number" }}
	        {{view Balanced.ControlGroupFieldView placeholder="Facebook ID" field="facebook" help="Enter the Facebook ID" }}
	        {{view Balanced.ControlGroupFieldView placeholder="Twitter ID" field="twitter" help="Enter the Twitter ID" }}
        {{/if}}
        </fieldset>

	    {{# if isLoading }}
	        <span class="loader loading"></span> <span class="message">Adding...</span>
	    {{else}}
	    	<div class="actions">
		        <button class="btn" {{ action save }} {{bindAttr disabled="isSaving"}}>{{submitTitle}}</button>
	        </div>
	    {{/if}}

    {{/if}}

</form>
